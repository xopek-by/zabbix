<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>7.4</version><template_groups><template_group><uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid><name>Templates/Applications</name></template_group></template_groups><templates><template><uuid>53d1ed1c603b4870a801ea0cafe4b0d5</uuid><template>Immich Docker by agent 2</template><name>Immich Docker by agent 2</name><description>Modified docker template for getting the data only for Immich containers.</description><groups><group><name>Templates/Applications</name></group></groups><items><item><uuid>b248a5ce6d7c4c5e8ee24dc3e19e2dd5</uuid><name>Docker: Get containers</name><key>docker.containers</key><history>0</history><value_type>TEXT</value_type><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>5178a7ddcdc841b687a0df1ad2bcaead</uuid><name>Immich: Total CPU usage</name><type>CALCULATED</type><key>docker.immich.cpu.usage</key><history>90d</history><value_type>FLOAT</value_type><units>%</units><params>sum(last_foreach(//docker.container_stats.cpu_pct_usage[*]))</params><description>This item calculates the total amount of CPU used by the service</description><tags><tag><tag>application</tag><value>immich</value></tag><tag><tag>component</tag><value>cpu</value></tag></tags></item><item><uuid>528218313d26492b9f6c30aa7b999898</uuid><name>Immich: Total memory usage</name><type>CALCULATED</type><key>docker.immich.memory.usage</key><history>90d</history><units>B</units><params>sum(last_foreach(//docker.container_stats.memory.usage[*]))</params><description>This item calculates the total amount of RAM used by the service</description><tags><tag><tag>application</tag><value>immich</value></tag><tag><tag>component</tag><value>memory</value></tag></tags></item></items><discovery_rules><discovery_rule><uuid>10589679c6784e48ad89331ae49375ab</uuid><name>Containers discovery</name><key>docker.containers.discovery[false]</key><delay>15m</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#NAME}</macro><value>{$DOCKER.LLD.FILTER.CONTAINER.MATCHES}</value></condition><condition><macro>{#NAME}</macro><value>{$DOCKER.LLD.FILTER.CONTAINER.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator></condition></conditions></filter><lifetime>1d</lifetime><enabled_lifetime_type>DISABLE_NEVER</enabled_lifetime_type><description>Discovery of containers metrics.

Parameter:
true  - Returns all containers
false - Returns only running containers</description><item_prototypes><item_prototype><uuid>bfe0064f9ece4c41bf972dc81279b739</uuid><name>Container {#NAME}: Created</name><type>DEPENDENT</type><key>docker.container_info.created[&quot;{#NAME}&quot;]</key><history>7d</history><units>unixtime</units><valuemap><name>Docker date format</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var input = JSON.parse(value);
  return truncatedTimestamp = Math.floor(Date.parse(input.Created) / 1000) || -1;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>cbd5588026ea4065848b0c452bbf6585</uuid><name>Container {#NAME}: Finished at</name><type>DEPENDENT</type><key>docker.container_info.finished[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>unixtime</units><description>Time at which the container last terminated.</description><valuemap><name>Docker date format</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var input = JSON.parse(value);
  return truncatedTimestamp = Math.floor(Date.parse(input.State.FinishedAt) / 1000) || -1;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>7304124afb7441d5abe6d7b871fbea74</uuid><name>Container {#NAME}: Image</name><type>DEPENDENT</type><key>docker.container_info.image[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$[?(@.Names[0] == &quot;{#NAME}&quot;)].Image.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.containers</key></master_item><tags><tag><tag>component</tag><value>images</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>aa5b526a080e4458b39dc43026bed4fa</uuid><name>Container {#NAME}: Restart count</name><type>DEPENDENT</type><key>docker.container_info.restart_count[&quot;{#NAME}&quot;]</key><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.RestartCount</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>a154473f6fc84ed88cce3858a7e7f89e</uuid><name>Container {#NAME}: Started at</name><type>DEPENDENT</type><key>docker.container_info.started[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>unixtime</units><valuemap><name>Docker date format</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var input = JSON.parse(value);
  return truncatedTimestamp = Math.floor(Date.parse(input.State.StartedAt) / 1000) || -1;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>ab20d2081d974217be12d8b6eea7531a</uuid><name>Container {#NAME}: Dead</name><type>DEPENDENT</type><key>docker.container_info.state.dead[&quot;{#NAME}&quot;]</key><history>7d</history><valuemap><name>Docker flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Dead</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>6b09ed7e81ed418bb3a90428605ce574</uuid><name>Container {#NAME}: Error</name><type>DEPENDENT</type><key>docker.container_info.state.error[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Error</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>ed69dc18c5904b7bb40353b753c2fa50</uuid><expression>last(/Immich Docker by agent 2/docker.container_info.state.error[&quot;{#NAME}&quot;],#1)&lt;&gt;last(/Immich Docker by agent 2/docker.container_info.state.error[&quot;{#NAME}&quot;],#2) and length(last(/Immich Docker by agent 2/docker.container_info.state.error[&quot;{#NAME}&quot;]))&gt;0</expression><name>Container {#NAME}: An error has occurred in the container</name><event_name>Container {#NAME}: Version has changed (new version: {ITEM.VALUE})</event_name><priority>WARNING</priority><description>Container {#NAME} has an error. Acknowledge to close the problem manually.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>ba92f107f36a40f38845744c9ec6ff03</uuid><name>Container {#NAME}: Exit code</name><type>DEPENDENT</type><key>docker.container_info.state.exitcode[&quot;{#NAME}&quot;]</key><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.ExitCode</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>a133814a56fc426f8aab430907dc7113</uuid><name>Container {#NAME}: Health failing streak</name><type>DEPENDENT</type><key>docker.container_info.state.health.failing[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Health.FailingStreak</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>51122b4c68b044189f525c47003ee12d</uuid><name>Container {#NAME}: Health status</name><type>DEPENDENT</type><key>docker.container_info.state.health[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><description>Container's `HEALTHCHECK`.</description><valuemap><name>Docker container health state</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var input = JSON.parse(value);
if (typeof input.State.Health !== 'object' || typeof input.State.Health === 'undefined') {
  return 4;
}
  return (['starting', 'unhealthy', 'healthy', 'none'].indexOf(input.State.Health.Status) + 1);</parameter></parameters></step><step><type>IN_RANGE</type><parameters><parameter>1</parameter><parameter>4</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>4</error_handler_params></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>cc1932fe659e4371b18997a7573d54da</uuid><expression>count(/Immich Docker by agent 2/docker.container_info.state.health[&quot;{#NAME}&quot;],2m,,2)&gt;=2</expression><name>Container {#NAME}: Health state container is unhealthy</name><opdata>{ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><description>Container health state is unhealthy.</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>866f63c824714a4eb5b4f78cb910706c</uuid><name>Container {#NAME}: OOMKilled</name><type>DEPENDENT</type><key>docker.container_info.state.oomkilled[&quot;{#NAME}&quot;]</key><history>7d</history><valuemap><name>Docker flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.OOMKilled</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>b1250c39198342a5a488d13f0614b097</uuid><name>Container {#NAME}: Paused</name><type>DEPENDENT</type><key>docker.container_info.state.paused[&quot;{#NAME}&quot;]</key><history>7d</history><valuemap><name>Docker flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Paused</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>08f4c07968a141138ed1e86987cc0c45</uuid><name>Container {#NAME}: Pid</name><type>DEPENDENT</type><key>docker.container_info.state.pid[&quot;{#NAME}&quot;]</key><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Pid</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>f35e4a473b4f4c8886bc54193aa26122</uuid><name>Container {#NAME}: Restarting</name><type>DEPENDENT</type><key>docker.container_info.state.restarting[&quot;{#NAME}&quot;]</key><history>7d</history><valuemap><name>Docker flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Restarting</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>0de0b3b3e8474fe8a538090252db700a</uuid><name>Container {#NAME}: Running</name><type>DEPENDENT</type><key>docker.container_info.state.running[&quot;{#NAME}&quot;]</key><history>7d</history><valuemap><name>Docker flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Running</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>39a5f669f0cc45d8a7d60e4cf083146d</uuid><name>Container {#NAME}: Status</name><type>DEPENDENT</type><key>docker.container_info.state.status[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.State.Status</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>docker.container_info[&quot;{#NAME}&quot;,full]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>6c1b75efb20a4c16991fa86a6d22b66e</uuid><name>Container {#NAME}: Get info</name><key>docker.container_info[&quot;{#NAME}&quot;,full]</key><history>0</history><value_type>CHAR</value_type><description>Return low-level information about a container.</description><tags><tag><tag>component</tag><value>raw</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>5dc0b910563c4a708b5fe08d98d0334c</uuid><name>Container {#NAME}: CPU percent usage</name><type>DEPENDENT</type><key>docker.container_stats.cpu_pct_usage[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.cpu_usage.percent_usage</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>f52db89f202c4f4193e031729d942170</uuid><name>Container {#NAME}: CPU kernelmode usage per second</name><type>DEPENDENT</type><key>docker.container_stats.cpu_usage.kernel.rate[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>s</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.cpu_usage.usage_in_kernelmode</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type></step><step><type>MULTIPLIER</type><parameters><parameter>1.0E-9</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>49dc08b5c57a4f1ca9a5ba8f0a0754db</uuid><name>Container {#NAME}: Throttled periods</name><type>DEPENDENT</type><key>docker.container_stats.cpu_usage.throttled_periods[&quot;{#NAME}&quot;]</key><history>7d</history><description>Number of periods when the container hits its throttling limit.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.throttling_data.throttled_periods</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>62f3e9617b0c4ebd83e0f2d19a271a7d</uuid><name>Container {#NAME}: Throttled time</name><type>DEPENDENT</type><key>docker.container_stats.cpu_usage.throttled_time[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Aggregate time the container was throttled for in nanoseconds.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.throttling_data.throttled_time</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>1.0E-9</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>460c6764f3de4ee6bce9ca05ac8f46f9</uuid><name>Container {#NAME}: Throttling periods</name><type>DEPENDENT</type><key>docker.container_stats.cpu_usage.throttling_periods[&quot;{#NAME}&quot;]</key><history>7d</history><description>Number of periods with throttling active.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.throttling_data.periods</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>36235d14fc0d4d6dbf018aae26ec8e57</uuid><name>Container {#NAME}: CPU total usage per second</name><type>DEPENDENT</type><key>docker.container_stats.cpu_usage.total.rate[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>s</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.cpu_usage.total_usage</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type></step><step><type>MULTIPLIER</type><parameters><parameter>1.0E-9</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>cd04ddc565cf448da4ce07da0b380ba6</uuid><name>Container {#NAME}: CPU usermode usage per second</name><type>DEPENDENT</type><key>docker.container_stats.cpu_usage.user.rate[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>s</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.cpu_usage.usage_in_usermode</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type></step><step><type>MULTIPLIER</type><parameters><parameter>1.0E-9</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>9c0d9e76907841d98f18dce6c723ad65</uuid><name>Container {#NAME}: Memory commit bytes</name><type>DEPENDENT</type><key>docker.container_stats.memory.commit_bytes[&quot;{#NAME}&quot;]</key><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.memory_stats.commitbytes</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>eac97969af2644c6909545c74a66bae0</uuid><name>Container {#NAME}: Memory commit peak bytes</name><type>DEPENDENT</type><key>docker.container_stats.memory.commit_peak_bytes[&quot;{#NAME}&quot;]</key><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.memory_stats.commitpeakbytes</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>7ba7a4b551ea493983012e973c83193b</uuid><name>Container {#NAME}: Memory maximum usage</name><type>DEPENDENT</type><key>docker.container_stats.memory.max_usage[&quot;{#NAME}&quot;]</key><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.memory_stats.max_usage</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>38be7d39baae4eae942f576a5c5603cc</uuid><name>Container {#NAME}: Memory private working set</name><type>DEPENDENT</type><key>docker.container_stats.memory.private_working_set[&quot;{#NAME}&quot;]</key><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.memory_stats.privateworkingset</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>ec39b3cfddc64471b562b1d8776b54e8</uuid><name>Container {#NAME}: Memory usage</name><type>DEPENDENT</type><key>docker.container_stats.memory.usage[&quot;{#NAME}&quot;]</key><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.memory_stats.usage</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>d7d1f1610c0c4c049fbc7b3e87607a1e</uuid><name>Container {#NAME}: Online CPUs</name><type>DEPENDENT</type><key>docker.container_stats.online_cpus[&quot;{#NAME}&quot;]</key><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.cpu_stats.online_cpus</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>cf7a6539144247d9a4fa69988db1d2b3</uuid><name>Container {#NAME}: Current PIDs count</name><type>DEPENDENT</type><key>docker.container_stats.pids_stats.current[&quot;{#NAME}&quot;]</key><history>7d</history><description>Current number of PIDs the container has created.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.pids_stats.current</parameter></parameters></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>d037e1f0267745d193b04aa36bb87190</uuid><name>Container {#NAME}: Get stats</name><key>docker.container_stats[&quot;{#NAME}&quot;]</key><history>0</history><value_type>CHAR</value_type><description>Get container stats based on resource usage.</description><tags><tag><tag>component</tag><value>raw</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>b92145c6015f416eaac2339d786b054a</uuid><name>Container {#NAME}: Networks bytes received per second</name><type>DEPENDENT</type><key>docker.networks.rx_bytes[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].rx_bytes.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>dc2f5275ba7745bbae652eda95f386f7</uuid><name>Container {#NAME}: Networks incoming packets dropped per second</name><type>DEPENDENT</type><key>docker.networks.rx_dropped[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].rx_dropped.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>ad7bef4d88494c18a1026f1efbf116d6</uuid><name>Container {#NAME}: Networks errors received per second</name><type>DEPENDENT</type><key>docker.networks.rx_errors[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].rx_errors.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>108fb98661b44b14a8317ad868289029</uuid><name>Container {#NAME}: Networks packets received per second</name><type>DEPENDENT</type><key>docker.networks.rx_packets[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].rx_packets.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>033a027d4ea34c1f80aff6f855ef686f</uuid><name>Container {#NAME}: Networks bytes sent per second</name><type>DEPENDENT</type><key>docker.networks.tx_bytes[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].tx_bytes.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>aed6fd2cd2fb4a929e3a4cc07e121c49</uuid><name>Container {#NAME}: Networks outgoing packets dropped per second</name><type>DEPENDENT</type><key>docker.networks.tx_dropped[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].tx_dropped.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>c7edd0df4a6142679e1e3aa1c0a7e711</uuid><name>Container {#NAME}: Networks errors sent per second</name><type>DEPENDENT</type><key>docker.networks.tx_errors[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].tx_errors.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype><item_prototype><uuid>3e82872310c24fa0b56507720911fd6d</uuid><name>Container {#NAME}: Networks packets sent per second</name><type>DEPENDENT</type><key>docker.networks.tx_packets[&quot;{#NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.networks[*].tx_packets.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>CHANGE_PER_SECOND</type></step></preprocessing><master_item><key>docker.container_stats[&quot;{#NAME}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>container</tag><value>{#NAME}</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>595c73fd509746e39417c0b63eaeb800</uuid><expression>last(/Immich Docker by agent 2/docker.container_info.state.exitcode[&quot;{#NAME}&quot;])&gt;0 and last(/Immich Docker by agent 2/docker.container_info.state.running[&quot;{#NAME}&quot;])=0</expression><name>Container {#NAME}: Container has been stopped with error code</name><opdata>Exit code: {ITEM.LASTVALUE1}</opdata><priority>AVERAGE</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><uuid>d665510cb0e6477f9dc236f15dcd0a2b</uuid><name>Container {#NAME}: CPU usage</name><type>STACKED</type><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>199C0D</color><item><host>Immich Docker by agent 2</host><key>docker.container_stats.cpu_usage.kernel.rate[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>F63100</color><item><host>Immich Docker by agent 2</host><key>docker.container_stats.cpu_usage.user.rate[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>00611C</color><item><host>Immich Docker by agent 2</host><key>docker.container_stats.cpu_usage.total.rate[&quot;{#NAME}&quot;]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>dae13194e20d47e78881b44e98ee41d3</uuid><name>Container {#NAME}: Memory usage</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>199C0D</color><item><host>Immich Docker by agent 2</host><key>docker.container_stats.memory.usage[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>F63100</color><item><host>Immich Docker by agent 2</host><key>docker.container_stats.memory.max_usage[&quot;{#NAME}&quot;]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>6f15b906896b4084ac67d6f0bbf24b4c</uuid><name>Container {#NAME}: Network packets</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>199C0D</color><item><host>Immich Docker by agent 2</host><key>docker.networks.rx_packets[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>F63100</color><item><host>Immich Docker by agent 2</host><key>docker.networks.tx_packets[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>BOLD_LINE</drawtype><color>00611C</color><item><host>Immich Docker by agent 2</host><key>docker.networks.rx_errors[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><drawtype>BOLD_LINE</drawtype><color>F7941D</color><item><host>Immich Docker by agent 2</host><key>docker.networks.tx_errors[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><drawtype>BOLD_LINE</drawtype><color>FC6EA3</color><item><host>Immich Docker by agent 2</host><key>docker.networks.rx_dropped[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><drawtype>BOLD_LINE</drawtype><color>6C59DC</color><item><host>Immich Docker by agent 2</host><key>docker.networks.tx_dropped[&quot;{#NAME}&quot;]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>0b7c22483bdd4688bcc5c58ea2eba862</uuid><name>Container {#NAME}: Network traffic</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>199C0D</color><item><host>Immich Docker by agent 2</host><key>docker.networks.rx_bytes[&quot;{#NAME}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>F63100</color><item><host>Immich Docker by agent 2</host><key>docker.networks.tx_bytes[&quot;{#NAME}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>software</value></tag><tag><tag>target</tag><value>docker</value></tag></tags><macros><macro><macro>{$DOCKER.LLD.FILTER.CONTAINER.MATCHES}</macro><value>(?i)immich</value><description>Filter of discoverable containers.</description></macro><macro><macro>{$DOCKER.LLD.FILTER.CONTAINER.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>Filter to exclude discovered containers.</description></macro><macro><macro>{$DOCKER.LLD.FILTER.IMAGE.MATCHES}</macro><value>.*</value><description>Filter of discoverable images.</description></macro><macro><macro>{$DOCKER.LLD.FILTER.IMAGE.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>Filter to exclude discovered images.</description></macro></macros><dashboards><dashboard><uuid>3d6cacf0e56b4654affd7d10ce8d9f0e</uuid><name>Docker overview</name><pages><page><widgets><widget><type>graph</type><width>36</width><height>5</height><fields><field><type>STRING</type><name>reference</name><value>AAABB</value></field></fields></widget><widget><type>graph</type><y>5</y><width>36</width><height>5</height><fields><field><type>STRING</type><name>reference</name><value>AAABD</value></field></fields></widget><widget><type>graph</type><y>10</y><width>36</width><height>5</height><fields><field><type>STRING</type><name>reference</name><value>AAABF</value></field></fields></widget><widget><type>graph</type><x>36</x><width>36</width><height>5</height><fields><field><type>STRING</type><name>reference</name><value>AAABC</value></field></fields></widget><widget><type>graph</type><x>36</x><y>5</y><width>36</width><height>5</height><fields><field><type>STRING</type><name>reference</name><value>AAABE</value></field></fields></widget></widgets></page></pages></dashboard></dashboards><valuemaps><valuemap><uuid>1fa1ee5586dc4504921e29e4b6d47aff</uuid><name>Docker container health state</name><mappings><mapping><value>1</value><newvalue>starting</newvalue></mapping><mapping><value>2</value><newvalue>unhealthy</newvalue></mapping><mapping><value>3</value><newvalue>healthy</newvalue></mapping><mapping><value>4</value><newvalue>none</newvalue></mapping></mappings></valuemap><valuemap><uuid>08f331dd21e949319944a52873c84db5</uuid><name>Docker date format</name><mappings><mapping><value>-1</value><newvalue>Error parsing date</newvalue></mapping><mapping><value>-62135596800</value><newvalue>Null time</newvalue></mapping></mappings></valuemap><valuemap><uuid>74eb68936a7245eba12db05fe1f257e4</uuid><name>Docker flag</name><mappings><mapping><value>0</value><newvalue>False</newvalue></mapping><mapping><value>1</value><newvalue>True</newvalue></mapping></mappings></valuemap><valuemap><uuid>be209bc918f847009f5da018938d9137</uuid><name>Service state</name><mappings><mapping><value>0</value><newvalue>Down</newvalue></mapping><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></valuemap></valuemaps></template></templates></zabbix_export>
