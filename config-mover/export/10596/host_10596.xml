<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>7.4</version><host_groups><host_group><uuid>4caf1e5fe40249b48307b3e58775b266</uuid><name>Docker Servers</name></host_group><host_group><uuid>137f19e6e2dc4219b33553b812627bc2</uuid><name>Linux servers/Lenovo/Virtual machines</name></host_group></host_groups><hosts><host><host>docker-cloud</host><name>Docker CLOUD</name><monitored_by>PROXY_GROUP</monitored_by><proxy_group><name>local</name></proxy_group><templates><template><name>Docker by Zabbix agent 2 mbuz</name></template><template><name>Linux by Zabbix agent VMs</name></template></templates><groups><group><name>Docker Servers</name></group><group><name>Linux servers/Lenovo/Virtual machines</name></group></groups><interfaces><interface><ip>10.0.0.102</ip><interface_ref>if1</interface_ref></interface></interfaces><items><item><name>Immich CPU usage</name><type>CALCULATED</type><key>docker.cpu.usage[&quot;immich&quot;]</key><history>90d</history><value_type>FLOAT</value_type><units>%</units><params>last(//docker.container_stats.cpu_pct_usage[&quot;/immich_machine_learning&quot;])
+
last(//docker.container_stats.cpu_pct_usage[&quot;/immich_microservices&quot;])
+
last(//docker.container_stats.cpu_pct_usage[&quot;/immich_postgres&quot;])
+
last(//docker.container_stats.cpu_pct_usage[&quot;/immich_redis&quot;])
+
last(//docker.container_stats.cpu_pct_usage[&quot;/immich_server&quot;])</params><description>This item is calculating the sum of CPU load for all immich containers</description><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>immich</value></tag></tags></item><item><name>Immich memory usage</name><type>CALCULATED</type><key>docker.memory.usage[&quot;immich&quot;]</key><history>90d</history><units>B</units><params>last(//docker.container_stats.memory.usage[&quot;/immich_machine_learning&quot;])
+
last(//docker.container_stats.memory.usage[&quot;/immich_microservices&quot;])
+
last(//docker.container_stats.memory.usage[&quot;/immich_postgres&quot;])
+
last(//docker.container_stats.memory.usage[&quot;/immich_redis&quot;])
+
last(//docker.container_stats.memory.usage[&quot;/immich_server&quot;])</params><description>This item is calculating the sum of memory used for all immich containers</description><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>immich</value></tag></tags></item><item><name>Immich memory usage TEST</name><type>CALCULATED</type><key>memory.usage[&quot;immich&quot;]</key><history>90d</history><units>B</units><params>sum(last_foreach(//docker.container_stats.memory.usage[*]?[tag=&quot;container:/immich*&quot;]))</params><description>This item is calculating the sum of memory used for all immich containers</description><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>container</tag><value>immich</value></tag></tags></item></items><tags><tag><tag>application</tag><value>cloud</value></tag><tag><tag>application</tag><value>docker</value></tag><tag><tag>location</tag><value>lenovo</value></tag></tags><macros><macro><macro>{$CPU.UTIL.CRIT}</macro><value>80</value></macro><macro><macro>{$DOCKER.LLD.FILTER.CONTAINER.NOT_MATCHES}</macro><value>.*immich.*</value><description>Filter to exclude discovered containers.</description></macro><macro><macro>{$VFS.FS.FSTYPE.MATCHES}</macro><value>^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs|nfs|nfs4)$</value><description>This macro is used for discovery of the filesystems. It can be overridden on host level or its linked template level.</description></macro></macros><inventory_mode>AUTOMATIC</inventory_mode><inventory><name>docker-cloud</name><os>Linux version 6.8.0-83-generic (buildd@lcy02-amd64-098) (x86_64-linux-gnu-gcc-13 (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, GNU ld (</os></inventory></host></hosts><triggers><trigger><expression>last(/docker-cloud/vfs.file.cksum[/etc/passwd,sha256],#1)&lt;&gt;last(/docker-cloud/vfs.file.cksum[/etc/passwd,sha256],#2)</expression><name>Linux: /etc/passwd has been changed</name><priority>INFO</priority><manual_close>YES</manual_close><dependencies><dependency><name>Linux: Operating system description has changed</name><expression>change(/docker-cloud/system.sw.os) and length(last(/docker-cloud/system.sw.os))&gt;0</expression></dependency><dependency><name>Linux: System name has changed</name><expression>change(/docker-cloud/system.hostname) and length(last(/docker-cloud/system.hostname))&gt;0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>security</value></tag></tags></trigger><trigger><expression>min(/docker-cloud/vm.memory.utilization,5m)&gt;{$MEMORY.UTIL.MAX}</expression><name>Linux: High memory utilization</name><event_name>Linux: High memory utilization (&gt;{$MEMORY.UTIL.MAX}% for 5m)</event_name><priority>AVERAGE</priority><description>The system is running out of free memory.</description><dependencies><dependency><name>Linux: Lack of available memory</name><expression>max(/docker-cloud/vm.memory.size[available],5m)&lt;{$MEMORY.AVAILABLE.MIN} and last(/docker-cloud/vm.memory.size[total])&gt;0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger><trigger><expression>max(/docker-cloud/system.swap.size[,pfree],5m)&lt;{$SWAP.PFREE.MIN.WARN} and last(/docker-cloud/system.swap.size[,total])&gt;0</expression><name>Linux: High swap space usage</name><event_name>Linux: High swap space usage (less than {$SWAP.PFREE.MIN.WARN}% free)</event_name><opdata>Free: {ITEM.LASTVALUE1}, total: {ITEM.LASTVALUE2}</opdata><priority>WARNING</priority><description>If there is no swap configured, this trigger is ignored.</description><dependencies><dependency><name>Linux: High memory utilization</name><expression>min(/docker-cloud/vm.memory.utilization,5m)&gt;{$MEMORY.UTIL.MAX}</expression></dependency><dependency><name>Linux: Lack of available memory</name><expression>max(/docker-cloud/vm.memory.size[available],5m)&lt;{$MEMORY.AVAILABLE.MIN} and last(/docker-cloud/vm.memory.size[total])&gt;0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger><trigger><expression>change(/docker-cloud/system.sw.os) and length(last(/docker-cloud/system.sw.os))&gt;0</expression><name>Linux: Operating system description has changed</name><priority>INFO</priority><description>The description of the operating system has changed. Possible reasons are that the system has been updated or replaced. Acknowledge to close the problem manually.</description><manual_close>YES</manual_close><dependencies><dependency><name>Linux: System name has changed</name><expression>change(/docker-cloud/system.hostname) and length(last(/docker-cloud/system.hostname))&gt;0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></zabbix_export>
